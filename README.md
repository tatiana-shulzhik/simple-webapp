# Простое WebApp на Node.js, Express и PostgreSQL

## Описание

Данное веб-приложение построено на Node.js с использованием фреймворка Express и базы данных PostgreSQL с ORM Sequelize.

Приложение выполняет следующие задачи:
- Создаёт таблицу `Users` при запуске с помощью миграции.
- Добавляет в таблицу `Users` одного пользователя с начальным балансом `10000`.
- Реализует API-роут для обновления баланса пользователя.
- Обеспечивает, чтобы баланс пользователя не становился отрицательным.

## Стек технологий
- Node.js
- Express
- PostgreSQL
- Sequelize (ORM)
- Sequelize-cli (для управления миграциями)

## Установка и запуск

### 1. Клонирование репозитория
```sh
git clone https://github.com/tatiana-shulzhik/simple-webapp.git
cd simple-webapp
```

### 2. Установка зависимостей
```sh
npm install
```

### 3. Настройка переменных окружения
Создайте `.env` файл в корне проекта и укажите параметры по примеру из `.env.example`.

### 4. Запуск приложения  
Выполните команду для наката миграций и запуска приложения:  
```bash
docker compose up -d
```
## API Endpoints

### 1. Обновление баланса пользователя
**patch** `/api/balance`

**Параметры запроса:**
```json
{
  "userId": 1,
  "amount": -500
}
```

**Логика:**
- Если сумма `amount` положительная, баланс увеличивается.
- Если сумма `amount` отрицательная, баланс уменьшается.
- Баланс не может стать отрицательным.

**Ответ:**
```json
{
  "message": "Баланс успешно обновлен",
  "newBalance": 9500
}
```

## Дополнительная информация
- В проекте используется `Sequelize` для взаимодействия с базой данных.
- Баланс изменяется в реальном времени без использования очередей и отложенных задач.
